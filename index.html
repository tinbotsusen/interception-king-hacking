<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<title>傍受王者ハッキング</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div id="app">
  <canvas id="mx"></canvas>
  <div id="eb-glitch-overlay" class="hidden"></div>
  <div id="wb"></div>
  
  <div class="screen" id="ts">
    <button class="share-btn-top" onclick="openShareMenu()">📤</button>
    
    <div class="gt title-glitch">
      傍受王者<br>ハッキング<br>
      <span style="font-size:14px; color:var(--g); font-weight:bold; display:block; margin-top:5px; letter-spacing:1px;">
        — ライバルを倒し、最強のハッカーを目指せ！ —
      </span>
    </div>
    <div class="sl" id="sl"></div>
    <button class="btn" onclick="startFromTitle()" style="margin-top:15px;">▶ システム侵入開始</button>
    <div style="font-size:11px;color:var(--g);margin-top:14px">通算勝利: <span id="tw">0</span> | クリア: <span id="tsc">0</span>/15</div>
    
    <div id="eb-frame" class="hidden">
      <div class="eb-header">人智を超えたAIセキュリティに<span>挑め！</span></div>  
      <div id="eb-sl"></div>
    </div>
  </div>

  <div class="screen hidden" id="cs">
  <div class="ci" id="ci">
    <div id="ci-sg" style="color:var(--b);font-family:Orbitron;font-size:14px;letter-spacing:2px;">STAGE 1</div>
    <div class="ci-em" id="ci-em">👴</div>
    <div id="ci-nm">敵名</div>
    <div id="ci-ms">"セリフ"</div>
    </div>
  </div>

  <div class="screen hidden" id="gs">
    <div class="gl" id="gl-wrap">
      <div class="fw-zone" id="efz">
        <div style="display:flex; align-items:center;">
          <div class="fw-info-wrap"><span id="fw-en">ENEMY</span> <span id="fw-eh-txt">50/50 HP</span></div>
          <button id="pause-btn" onclick="togglePause()">❚❚</button>
        </div>
        <div class="fw-wrap" id="efzw"><div class="fw-fill" id="ef" style="width:100%"></div></div>
        <div class="brick-wall" id="ef-wall"><div class="wall-cracks" id="ef-cracks"></div></div>
      </div>
      <div id="bz"></div>
      <div class="fw-zone" id="pfz">
        <div style="display:flex;justify-content:space-between;font-size:12px;font-weight:bold;color:var(--b)"><span id="fw-ph-txt">100/100 HP</span><span>PLAYER FIREWALL</span></div>
        <div class="fw-wrap" id="pfzw"><div class="fw-fill" id="pf" style="width:100%"></div></div>
        <div class="brick-wall" id="pf-wall"><div class="wall-cracks" id="pf-cracks"></div></div>
      </div>
    </div>
  </div>

<div class="screen hidden" id="vs">
  <div class="gt green" style="margin-bottom: 20px;">STAGE CLEAR!</div>
  <div style="background:var(--panel);border:2px solid var(--g);border-radius:14px;padding:30px 20px;text-align:center;width:min(380px,92%);">
    <div class="vs-em-wrap" id="vs-em-wrap"><div class="vs-em" id="vs-em">👴</div><div class="vs-cross">❌</div></div>
    <div style="font-size:18px;color:var(--y);margin-bottom:10px;" id="vs-nm">敵名</div>
    <div id="vs-time" style="font-family:Orbitron; font-size:16px; color:var(--b); margin-bottom:15px; text-shadow:0 0 10px var(--b);"></div>
  </div>

  <div style="display:flex;flex-direction:column;gap:12px;margin-top:20px;width:80%;max-width:300px;">
    <button id="vs-next-btn" class="btn" onclick="nextStage()">▶ 次のターゲットへ</button>
    <button class="btn sec" onclick="showTitle()">◀ タイトルへ</button>
  </div>
</div>

  <div class="screen hidden" id="ls">
    <div class="gt" style="color:var(--r)">ACCESS DENIED</div>
    <div style="display:flex;flex-direction:column;gap:12px;margin-top:20px;width:80%;max-width:300px;"><button class="btn" style="background:var(--r);color:#fff" onclick="retryStage()">↺ 再接続</button><button class="btn sec" onclick="showTitle()">◀ タイトルへ</button></div>
  </div>

<div class="screen hidden" id="rs">
    <div class="gt" style="color:var(--y)">ALL SYSTEM<br>COMPROMISED</div>
    <div style="margin:20px;text-align:center;">おめでとう！！あなたが真の傍受王者だ！</div>
    <div style="display:flex;flex-direction:column;gap:12px;width:80%;max-width:300px;">
      <button class="btn" style="background:var(--y);color:#000;font-weight:900;" onclick="openShareMenu()">🌐 記録を世界に送信 (SHARE)</button>
      <button class="btn sec" onclick="showTitle()">◀ タイトルへ</button>
    </div>
  </div>

  <div id="share-modal" class="hidden" style="position:absolute; inset:0; background:rgba(0,0,0,0.85); z-index:2000; display:flex; justify-content:center; align-items:center; flex-direction:column;">
    <div style="background:var(--panel); border:2px solid var(--b); padding:25px; border-radius:12px; text-align:center; width:80%; max-width:320px; box-shadow:0 0 40px rgba(0,204,255,0.3);">
      <div style="color:var(--b); font-size:18px; font-weight:900; margin-bottom:20px; font-family:'Orbitron', monospace;">SELECT NETWORK</div>
      <div style="display:flex; flex-direction:column; gap:12px;">
        <button class="btn" style="min-height:48px; background:#000; color:#fff; border:2px solid #333; font-size:16px;" onclick="shareTo('x')">𝕏 X (Twitter)</button>
        <button class="btn" style="min-height:48px; background:#06c755; color:#fff; border:none; font-size:16px;" onclick="shareTo('line')">💬 LINEで送る</button>
        <button class="btn" style="min-height:48px; background:var(--g); color:#000; border:none; font-size:16px;" onclick="shareTo('copy')">📋 リンクをコピー</button>
        <button class="btn sec" style="min-height:40px; margin-top:15px; font-size:14px; padding:10px;" onclick="closeShareMenu()">キャンセル</button>
      </div>
    </div>
  </div>

  <div class="screen hidden" id="ps">
    <div class="ps-box">
      <div class="gt" style="font-size:24px;">PAUSED</div>
      <button class="btn" onclick="togglePause()">▶ 再開 (RESUME)</button>
      <button class="btn sec" onclick="quitGame()">◀ タイトルへ (TITLE)</button>
    </div>
  </div>
</div>
<script src="data.js"></script>
<script src="game.js"></script>
</body>
</html>